#include <EEPROM.h>

#define EEPROM_SIZE 96
#define SSID_ADDR   0
#define PASS_ADDR   32
#define MAX_LEN     32

void writeStringToEEPROM(int addrOffset, const String &str) {
  for (int i = 0; i < MAX_LEN; i++) {
    EEPROM.write(addrOffset + i, i < str.length() ? str[i] : 0);
  }
}

String readStringFromEEPROM(int addrOffset) {
  char data[MAX_LEN + 1];
  for (int i = 0; i < MAX_LEN; i++) {
    data[i] = EEPROM.read(addrOffset + i);
  }
  data[MAX_LEN] = '\0';
  return String(data);
}

void setup() {
  Serial.begin(115200);
  EEPROM.begin(EEPROM_SIZE);

  // Nur beim ersten Start aktivieren â€“ dann auskommentieren
  // writeStringToEEPROM(SSID_ADDR, "MySSID");
  // writeStringToEEPROM(PASS_ADDR, "SuperSecretPassword");
  // EEPROM.commit();

  String ssid = readStringFromEEPROM(SSID_ADDR);
  String pass = readStringFromEEPROM(PASS_ADDR);

  Serial.println("Gespeicherte SSID: " + ssid);
  Serial.println("Gespeichertes Passwort: " + pass);
}

void loop() {
  // Nichts hier
}
